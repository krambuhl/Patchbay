!function(t,e){if("function"==typeof define&&define.amd)define(["lodash","jquery","struck","exports"],function(n,o,i,r){t.Patchbay=e(t,r,n,o,i)});else if("undefined"!=typeof exports){var n=require("lodash"),o=require("jquery"),i=require("struck");exports=e(t,exports,n,o,i)}else t.Patchbay=e(t,{},t._,t.jQuery,t.Struck)}(this,function(t,e,n,o,i){function r(t,e){return n.isFunction(t)?t.apply(e):t}function s(){return n.find(arguments,function(t){return!n.isUndefined(t)})}return e.Model=function(){var t=i.EventObject.extend();return t.create=function(t,e,o){n.extend(e,{data:t});var i=this.extend(e);return new i(n.extend({},e,o))},t}(),e.View=function(){var t=["el","ui","template","model","data"],u=i.EventObject.extend();return u.prototype.baseConstructor=function(){var e=this;i.EventObject.prototype.baseConstructor.apply(this,arguments),n.extend(this,n.pick(this.options,t)),this.setModel(this.model,this.data),this.setElement(r(this.el)),this.render(this.model),n.defer(function(){e.setUI(e,r(e.ui)),e.setup(e.options)})},u.prototype.setModel=function(t,n){n=s(n,{}),t?t instanceof e.Model?(this.model=t,this.model.set(n)):"function"==typeof t&&t.create?this.model=t.create(n):"object"==typeof t&&(this.model=e.Model.create(t)):this.model=e.Model.create(n)},u.prototype.setElement=function(t){var e=this;t&&(this.$el=o(t).eq(0),this.el=this.$el[0],this.$=function(t){return e.$el.find(t)})},u.prototype.setUI=function(t){this.ui=n.reduce(t,function(t,e,n){return t[n]=this.$(e),t},{},this)},u.prototype.render=i.hook("render",function(t,e){n.isUndefined(t)||(n.isFunction(t)?this.setElement(t(s(e.data,{}))):n.isString(t)&&this.setElement(n.template(t,s(e.data,{}))))}),u.prototype.setup=n.noop,u.prototype.destroy=function(){i.EventObject.prototype.destroy.apply(this,arguments),this.model.destroy()},u}(),e});
//# sourceMappingURL=patchbay.min.js.map