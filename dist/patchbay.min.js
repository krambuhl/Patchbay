!function(e,t){if("function"==typeof define&&define.amd)define(["lodash","jquery","struck","exports"],function(n,i,o,s){e.Patchbay=t(e,s,n,i,o)});else if("undefined"!=typeof exports){var n=require("lodash"),i=require("jquery"),o=require("struck");exports=t(e,exports,n,i,o)}else e.Patchbay=t(e,{},e._,e.jQuery,e.Struck)}(this,function(e,t,n,i,o){function s(e,t){return n.isFunction(e)?e.apply(t):e}function r(){return n.find(arguments,function(e){return!n.isUndefined(e)})}return t.Model=function(){var e=o.EventObject.extend();return e.create=function(e,t,i){n.extend(t,{data:e});var o=this.extend(t);return new o(n.extend({},t,i))},e}(),t.View=function(){function e(e,t){e.hook(t,"before"),e[t].apply(e,n.rest(arguments,2)),e.hook(t),e.hook(t,"after")}var d=["el","ui","template","model","data","parent"],u=o.EventObject.extend();return u.prototype.initializeObject=function(){var t=this;o.EventObject.prototype.initializeObject.apply(this,arguments),n.extend(this,n.pick(this.options,d)),this.setModel(this.model,this.data),this.setElement(s(this.el)),this.render(this.model),this.children=[],n.defer(function(){t.setUI(s(t.ui)),e(t,"setup",t.options)})},u.prototype.setModel=function(e,n){n=r(n,{}),e?e instanceof t.Model?(this.model=e,this.model.set(n)):"function"==typeof e&&e.create?this.model=e.create(n):"object"==typeof e&&(this.model=t.Model.create(e)):this.model=t.Model.create(n)},u.prototype.setElement=function(e){var t=this;e?(this.$el=i(e).eq(0),this.el=this.$el[0],this.$=function(e){return t.$el.find(e)}):this.setElement(document.createElement("div"))},u.prototype.setUI=function(e){this.ui=n.reduce(e,function(e,t,n){return e[n]=this.$(t),e},{},this)},u.prototype.render=o.hook("render",function(e,t){n.isUndefined(r(this.el,e))||(n.isFunction(e)?this.setElement(e(r(t.data,{}))):n.isString(e)&&this.setElement(n.template(e,r(t.data,{}))))}),u.prototype.state=function(e,t){return n.isUndefined(t)?this.$el.hasClass("is-"+e):void(t?this.$el.addClass("is-"+e):this.$el.removeClass("is-"+e))},u.prototype.addChild=function(e,i){var s=this;if(n.isUndefined(e)&&(i=e,e=this.$el),n.isUndefined(i)&&(i=t.View),e.length>1)return e.map(function(){return s.addChild(this,i)});var r=i instanceof o.EventObject?i:i.create({el:e});return this.children.push(r),r},u.prototype.setup=n.noop,u.prototype.cleanup=n.noop,u.prototype.destroy=function(){o.EventObject.prototype.destroy.apply(this,arguments),this.model.destroy(),e(this,"cleanup")},u}(),t});
//# sourceMappingURL=patchbay.min.js.map